<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
 <!-- 与MyBatisDemo02相比多了一个接口namespace指定接口位置 -->
<mapper namespace="cn.edu.nwsuaf.dao.ProductDao">
<!-- 查询商品信息 -->
	<select id="findProductById" parameterType="int" resultType="cn.edu.nwsuaf.entity.Product">
		select * from product where id=#{id}	
	</select>
	
	<select id="findAllProduct" resultType="cn.edu.nwsuaf.entity.Product">
		SELECT *
		FROM `product` AS t1 JOIN (SELECT ROUND(RAND() * ((SELECT MAX(id) FROM
		`product`)-(SELECT MIN(id) FROM `product`))+(SELECT MIN(id) FROM
		`product`)) AS id) AS t2
		WHERE t1.id >= t2.id
		ORDER BY t1.id LIMIT 10;
	</select>
	
	<!-- 陈一婷 -->
	<select id="findAllProduct1" resultType="cn.edu.nwsuaf.entity.Product">
		select * from product
	</select>
	
	
	<select id="findProductByName" parameterType="String" resultType="cn.edu.nwsuaf.entity.Product">
	    select * from product where product_name=#{name}
	</select>
	
	<select id="findProductById1" parameterType="int" resultType="cn.edu.nwsuaf.entity.Product">
		select * from product where id=#{id}	
	</select>
	
	<select id="findProductByCategory" parameterType="String" resultType="cn.edu.nwsuaf.entity.Product">
	    select * from product where keywords=#{category}
	</select>
	
	<select id="findProductByPrice" parameterType="double" resultType="cn.edu.nwsuaf.entity.Product">
	    select * from product where dangqian_price=#{price}
	</select>
	
	<select id="findProductByAddTime" parameterType="long" resultType="cn.edu.nwsuaf.entity.Product">
	    select * from product where add_time=#{addTime}
	</select>
	
	<insert id="addProduct" parameterType="cn.edu.nwsuaf.entity.Product" >
		insert into product (product_name,description,fixed_price,dangqian_price,keywords,product_pic) 
		values(#{name},#{description},#{fixed_price},#{dangqian_price},#{category},#{path})
	</insert>
	
	
	<delete id="deleteProduct" parameterType="int"> 
		delete * from product where id = #{id}
	</delete>
	
	<update id="updateProductPrice" parameterType="cn.edu.nwsuaf.entity.Product">
	    update product set dangqian_price=#{dangqian_price} where id=#{id}
	</update>
	
	<update id="updateProductCategory" parameterType="cn.edu.nwsuaf.entity.Product">
	    update product set keywords=#{keywords} where id=#{id}
	</update>
	
	<update id="updateProductInfo" parameterType="cn.edu.nwsuaf.entity.Product">
	    update product set product_name=#{product_name},description=#{description},fixed_price=#{fixed_price},dangqian_price=#{dangqian_price},keywords=#{keywords},product_pic=#{product_pic} 
		where id=#{id}
	</update>
	
</mapper>